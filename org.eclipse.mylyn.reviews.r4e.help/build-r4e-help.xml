<?xml version="1.0" encoding="UTF-8"?>
<!--
    Copyright (c) 2010 Red Hat, Inc.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html
   
    Contributors:
        Red Hat - initial API and implementation
        Alvaro Sanchez-Leon - Adapted to Mylyn Reviews R4E
 -->
<project name="org.eclipse.mylyn.reviews.r4e.help" basedir="." default="all">
	<description>
            Generate Eclipse help content for the Mylyn Reviews R4E user guide
    </description>

	<property name="r4e.help.title" value="R4E Documentation" />
	<property name="r4e.ug.title" value="R4E User Guide" />
	<property name="help.doc.url.base" value="http://wiki.eclipse.org" />

	<setproxy proxyhost="www.server.com" proxyport="xxxx"/>

	<path id="wikitext.tasks.classpath">
		<fileset dir="C:\eclipse\plugins">
			<include name="org.eclipse.mylyn.wikitext.*core*.jar" />
		</fileset>
	</path>

	<taskdef classpathref="wikitext.tasks.classpath" resource="org/eclipse/mylyn/internal/wikitext/mediawiki/core/tasks/tasks.properties" />
	<taskdef classpathref="wikitext.tasks.classpath" resource="org/eclipse/mylyn/wikitext/core/util/anttask/tasks.properties" />

	<target name="all" description="Generate Eclipse help content for the Mylyn Reviews R4E user guide">
		<sequential>
			<delete failonerror="false">
				<fileset dir="${basedir}/help/images" />
			</delete>
			
			<mediawiki-to-eclipse-help wikiBaseUrl="${help.doc.url.base}"
				validate="true" failonvalidationerror="true" prependImagePrefix="images"
				formatoutput="true" defaultAbsoluteLinkTarget="egit_external" dest="${basedir}/help"
				navigationimages="true" title="${r4e.help.title}" helpPrefix="help"
				generateUnifiedToc="true">

				<path name="Reviews/R4E/User_Guide" title="${r4e.ug.title}" />

				<stylesheet url="book.css" />
				<pageAppendum>
					= Updating This Document =
				
					This document is maintained in a collaborative wiki.  If you wish to update or modify this document please visit 
					http://wiki.eclipse.org/Reviews/R4E/User_Guide
				</pageAppendum>
			</mediawiki-to-eclipse-help>
			<mkdir dir="help/images" />
			<copy todir="${basedir}/help/images" overwrite="true">
				<fileset dir="images" />
			</copy>
			<!--antcall target="test" /-->
		</sequential>
	</target>
</project>